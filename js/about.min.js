document.addEventListener("DOMContentLoaded", () => { const teamMembers = document.querySelectorAll(".team-member"); teamMembers.forEach(member => { const popup = member.querySelector(".bio-popup"); // Initialize aria-expanded attribute if (!member.hasAttribute("aria-expanded")) { member.setAttribute("aria-expanded", "false"); } const showPopup = () => { // Close other open popups first for better UX document.querySelectorAll(".bio-popup.show").forEach(otherPopup => { if (otherPopup !== popup) { otherPopup.classList.remove("show"); const otherMember = otherPopup.closest(".team-member"); if (otherMember) { otherMember.setAttribute("aria-expanded", "false"); } } }); popup.classList.add("show"); member.setAttribute("aria-expanded", "true"); }; const hidePopup = () => { popup.classList.remove("show"); member.setAttribute("aria-expanded", "false"); }; member.addEventListener("click", () => { const isExpanded = member.getAttribute("aria-expanded") === "true"; if (isExpanded) { hidePopup(); } else { showPopup(); } }); member.addEventListener("keydown", e => { if (e.key === "Enter" || e.key === " ") { e.preventDefault(); const isExpanded = member.getAttribute("aria-expanded") === "true"; if (isExpanded) { hidePopup(); } else { showPopup(); } } }); }); // Close popups when clicking outside document.addEventListener("click", e => { if (!e.target.closest(".team-member")) { document.querySelectorAll(".bio-popup.show").forEach(popup => { popup.classList.remove("show"); const member = popup.closest(".team-member"); if (member) { member.setAttribute("aria-expanded", "false"); } }); } }); // Close popups with the Escape key document.addEventListener("keydown", e => { if (e.key === "Escape") { document.querySelectorAll(".bio-popup.show").forEach(popup => { popup.classList.remove("show"); const member = popup.closest(".team-member"); if (member) { member.setAttribute("aria-expanded", "false"); } }); } });});