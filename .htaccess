# ------------------------------------------
# Basic Security & Optimization for Nexus
# ------------------------------------------

# Disable directory browsing
Options -Indexes -MultiViews

# Force HTTPS and www
RewriteEngine On
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^ https://www.nexuseng.org%{REQUEST_URI} [R=301,L,NE]

# Clean URLs setup
# 1. Redirect /file.html to /file/
RewriteCond %{THE_REQUEST} \s/+(.*?)\.html[\s?] [NC]
RewriteRule ^ /%1/ [R=301,L,NE]

# 2. Special handling for jobs (must come before general rule)
RewriteRule ^jobs/([^/]+)/?$ /jobs/$1.html [L,NC]

# 3. General HTML cleanup
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/$1.html -f
RewriteRule ^(.+?)/?$ $1.html [L]

# [Keep all your existing security headers and caching rules below...]