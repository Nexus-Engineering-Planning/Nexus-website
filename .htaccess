# ==============================================================================
# | PERFORMANCE                                                                |
# ==============================================================================

# ------------------------------------------------------------------------------
# | Caching                                                                    |
# ------------------------------------------------------------------------------

# Set Cache-Control headers for Astro's versioned assets
<IfModule mod_headers.c>
  <FilesMatch "\/_astro\/.*">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>
</IfModule>

# ------------------------------------------------------------------------------
# | Compression                                                                |
# ------------------------------------------------------------------------------

<IfModule mod_deflate.c>
  # Enable compression for the following file types
  AddOutputFilterByType DEFLATE text/html text/css text/javascript application/javascript application/json image/svg+xml
</IfModule>

# ==============================================================================
# | MIME TYPES                                                                 |
# ==============================================================================

<IfModule mod_mime.c>
  # Add correct MIME type for Web App Manifest files
  AddType application/manifest+json .webmanifest
</IfModule>

# ==============================================================================
# | ROUTING                                                                    |
# ==============================================================================

<IfModule mod_rewrite.c>
  RewriteEngine On
  # If a directory or a file exists, use it directly
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  # Otherwise, forward the request to 404.html
  RewriteRule . /404.html [L]
</IfModule>
