# Disable directory browsing
Options -Indexes -MultiViews

# Force HTTPS and www
RewriteEngine On
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^ https://www.nexuseng.org%{REQUEST_URI} [R=301,L,NE]

# Avoid rewriting jobs/*.html by skipping .html rewrite rule for /jobs
RewriteCond %{REQUEST_URI} !^/jobs/

# Clean URLs: redirect /file.html → /file/
RewriteCond %{THE_REQUEST} \s/+(.*?)\.html[\s?] [NC]
RewriteRule ^ /%1/ [R=301,L,NE]

# Rewrite /jobs/slug/ → /jobs/slug.html (MUST come before general .html rewrite)
RewriteRule ^jobs/([^/]+)/?$ /jobs/$1.html [L,NC]

# General .html cleanup: serve /path/ as /path.html
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/$1.html -f
RewriteRule ^(.+?)/?$ $1.html [L]
